<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Birthday Quest for Neha üèÜ</title>
    <style>
        :root { --pink: #ff4081; --purple: #7b1fa2; }
        body {
            background-color: #fff5f8;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            margin: 0; padding: 20px;
            overflow-x: hidden;
            touch-action: auto; /* Prevents scrolling while playing the game */
        }
        .page { display: none; max-width: 500px; margin: 0 auto; background: white; padding: 30px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Task 1: Love Meter */
        #meter-bar { width: 100%; height: 30px; background: #eee; border-radius: 15px; margin: 20px 0; overflow: hidden; }
        #meter-fill { width: 0%; height: 100%; background: linear-gradient(to right, var(--pink), var(--purple)); transition: width 0.1s; }

        /* General Buttons */
        .choice-btn { background: var(--pink); color: white; border: none; padding: 15px; margin: 10px; border-radius: 10px; width: 85%; font-size: 1.1rem; cursor: pointer; font-weight: bold; box-shadow: 0 4px 0 #ad1457; }
        .choice-btn:active { transform: translateY(4px); box-shadow: none; }

        /* Photo Styling */
        .photo-container { margin: 20px 0; }
        .photo-frame { width: 95%; border: 8px solid white; border-radius: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); transform: rotate(-2deg); margin-bottom: 15px; }
        .photo-frame.alt { transform: rotate(2deg); }

        /* Game Area */
        #game-canvas { background: #fdf2f8; border: 2px dashed var(--pink); border-radius: 15px; margin-top: 10px; touch-action: none; }

        /* Scratch Card */
        #scratch-container { position: relative; width: 280px; height: 120px; margin: 20px auto; border-radius: 15px; overflow: hidden; cursor: crosshair; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .secret-msg { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            background: #fff0f5; color: #d81b60; font-weight: bold; border: 2px dashed #ff4081; box-sizing: border-box;
        }
        #scratch-canvas { position: absolute; top: 0; left: 0; z-index: 2; touch-action: none; }
        
        /* Animations */
        .emoji { position: fixed; top: -50px; z-index: 99; pointer-events: none; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

    <div id="page1" class="page active">
        <h1>Task #1: Love Sync üß™</h1>
        <p>Neha, tap the button to charge the quest with enough love to proceed!</p>
        <div id="meter-bar"><div id="meter-fill"></div></div>
        <button class="choice-btn" onclick="boostMeter()">TAP TO FILL WITH LOVE!</button>
        <p id="meter-status">Status: Scanning for Neha's vibes... üîç</p>
    </div>

    <div id="page2" class="page">
        <h1>Task #2: The Truth üß†</h1>
        <p>Who is officially the luckiest person in this relationship?</p>
        <button class="choice-btn" onclick="alert('Try again Neha! You know Swatantra is the best.')">Swatantra (For having Neha)</button>
        <button class="choice-btn" onclick="nextPage(3)">Neha (For having Swatantra) ‚ù§Ô∏è</button>
        <button class="choice-btn" onclick="alert('Mirror says: Neha is luckier! Try again.')">The Mirror</button>
    </div>

    <div id="page3" class="page">
        <h1>Task #3: Catch the Joy üéÇ</h1>
        <p>Neha, catch 5 birthday cakes to unlock the final surprise!</p>
        <canvas id="game-canvas" width="300" height="300"></canvas>
        <p>Score: <span id="score">0</span> / 5</p>
        <p style="font-size: 0.8rem; color: #888;">(Slide your finger to move the basket)</p>
    </div>

    <div id="page4" class="page">
        <button id="partyBtn" class="choice-btn" style="background: #4caf50; box-shadow: 0 4px 0 #2e7d32;">üéâ ACTIVATE PARTY MODE!</button>
        <audio id="bdayMusic" src="music.mp3" loop></audio>
        
        <h1>Happy Birthday, Neha! üéÇ</h1>
        
        <div class="photo-container">
            <img src="photo1.jpg" class="photo-frame" alt="Us">
            <img src="photo2.jpg" class="photo-frame alt" alt="Birthday Girl">
        </div>

        <p>"Neha,  
      You are my happiest thought, my safest place, and my favorite smile.  
      Life feels brighter, louder, and more beautiful just because you exist.  
      Every moment with you is special ‚Äî but today is extra special  
      because today **YOU** were born üíñ "</p>
        
        <h3 style="color: var(--purple);">Your Special Reward:</h3>
        <div id="scratch-container">
            <div class="secret-msg">
                <span style="font-size: 1.4rem;">üéüÔ∏è B-DAY COUPON</span>
                <hr style="width: 80%; border: 0.5px solid #ff4081;">
                <span>VALID FOR: 1 GIANT BDAY HUG</span>
                <small style="font-size: 0.7rem; margin-top: 5px;">*From Swatantra, redeemable Later when you will come back!</small>
            </div>
            <canvas id="scratch-canvas" width="280" height="120"></canvas>
        </div>
        <p><i>Scratch with your finger!</i></p>
    </div>

    <script>
        function nextPage(num) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page' + num).classList.add('active');
            if(num === 3) startTask3();
        }

        // TASK 1
        let meter = 0;
        function boostMeter() {
            meter += 10;
            document.getElementById('meter-fill').style.width = meter + '%';
            if (meter >= 100) {
                document.getElementById('meter-status').innerText = "Status: FULLY CHARGED! ‚ù§Ô∏è";
                setTimeout(() => nextPage(2), 600);
            }
        }

        // TASK 3: MINI GAME
        function startTask3() {
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            let score = 0;
            let basketX = 130;
            let cakeX = Math.random() * 260, cakeY = 0;

            function moveBasket(e) {
                const rect = canvas.getBoundingClientRect();
                const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
                basketX = Math.max(0, Math.min(x - 20, 260));
                if(e.touches) e.preventDefault();
            }

            canvas.addEventListener('touchmove', moveBasket, {passive: false});
            canvas.addEventListener('mousemove', moveBasket);

            function draw() {
                ctx.clearRect(0, 0, 300, 300);
                ctx.font = "30px Arial";
                ctx.fillText("üß∫", basketX, 280);
                ctx.fillText("üéÇ", cakeX, cakeY);
                cakeY += 4;

                if(cakeY > 260 && cakeX > basketX - 20 && cakeX < basketX + 40) {
                    score++;
                    document.getElementById('score').innerText = score;
                    cakeY = 0; cakeX = Math.random() * 260;
                } else if (cakeY > 300) {
                    cakeY = 0; cakeX = Math.random() * 260;
                }

                if(score < 5) {
                    requestAnimationFrame(draw);
                } else {
                    setTimeout(() => nextPage(4), 500);
                }
            }
            draw();
        }

        // SCRATCH CARD
        const canvas = document.getElementById('scratch-canvas');
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#C0C0C0'; 
        ctx.fillRect(0, 0, 280, 120);
        ctx.fillStyle = '#888'; ctx.font = 'bold 16px Arial'; ctx.fillText('NEHA, SCRATCH HERE', 55, 65);

        function scratch(e) {
            const rect = canvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            const x = clientX - rect.left;
            const y = clientY - rect.top;
            
            ctx.globalCompositeOperation = 'destination-out';
            ctx.beginPath(); ctx.arc(x, y, 25, 0, Math.PI * 2); ctx.fill();
        }
        canvas.addEventListener('touchmove', (e) => { scratch(e); e.preventDefault(); }, {passive: false});
        canvas.addEventListener('mousemove', (e) => { if(e.buttons === 1) scratch(e); });

        // PARTY MODE
        const btn = document.getElementById('partyBtn');
        const audio = document.getElementById('bdayMusic');

        btn.addEventListener('click', () => {
            audio.play();
            btn.style.display = 'none';
            setInterval(createEmoji, 150);
        });

        function createEmoji() {
            const e = document.createElement('div');
            const icons = ['‚ù§Ô∏è','üíâ','üéÇ','ü•Ç','üéà','ü©∫','üå°','üë©‚Äç‚öïÔ∏è'];
            e.innerText = icons[Math.floor(Math.random()*icons.length)];
            e.className = 'emoji';
            e.style.left = Math.random() * 100 + 'vw';
            e.style.fontSize = Math.random() * 20 + 20 + 'px';
            e.style.animationDuration = (Math.random() * 2 + 2) + 's';
            document.body.appendChild(e);
            setTimeout(() => e.remove(), 4000);
        }
    </script>
</body>
</html>
